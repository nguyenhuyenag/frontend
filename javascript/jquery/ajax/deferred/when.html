<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>When</title>
    <link rel="shortcut icon" href="#">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css">
    <script type="text/javascript" src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>

<body>
    <div class="container mt-4">
        <h1>When</h1>
        <p>
            when() cho phép đồng thời xử lý nhiều tác vụ bất đồng bộ (asynchronous tasks) và thực hiện hành động chỉ khi
            tất cả các tác vụ này hoàn thành. Nó hỗ trợ xử lý các đối tượng Deferred hoặc các hàm trả về đối tượng
            Promise.
        </p>
        <pre>
            jQuery.when(deferred1, deferred2, ..., deferredN).done(function(result1, result2, ..., resultN) {
                // Xử lý kết quả sau khi tất cả các deferred hoặc promise hoàn thành thành công
            }).fail(function() {
                // Xử lý khi có ít nhất một deferred hoặc promise bị thất bại
            }).always(function() {
                // Xử lý cuối cùng sau khi tất cả các deferred hoặc promise hoàn thành hoặc thất bại
            });
            
            // Ví dụ
            function asyncTask1() {
                var deferred = jQuery.Deferred();
                setTimeout(function() {
                  deferred.resolve("Task 1 completed");
                }, 1000);
                return deferred.promise();
              }
              
            function asyncTask2() {
                var deferred = jQuery.Deferred();
                setTimeout(function() {
                  deferred.resolve("Task 2 completed");
                }, 1500);  
                return deferred.promise();
            }
              
            jQuery.when(asyncTask1(), asyncTask2()).done(function(result1, result2) {
                console.log(result1); // "Task 1 completed"
                console.log(result2); // "Task 2 completed"
            }).fail(function() {
                console.error("At least one task failed!");
            });  
        </pre>
        <h4>Ví dụ</h4>
        <pre>
            function asyncTask1() {
                var deferred = jQuery.Deferred();
                setTimeout(function() {
                  deferred.resolve("Task 1 completed");
                }, 1000);
                return deferred.promise();
              }
              
            function asyncTask2() {
                var deferred = jQuery.Deferred();
                setTimeout(function() {
                  deferred.resolve("Task 2 completed");
                }, 1500);  
                return deferred.promise();
            }
              
            jQuery.when(asyncTask1(), asyncTask2()).done(function(result1, result2) {
                console.log(result1); // "Task 1 completed"
                console.log(result2); // "Task 2 completed"
            }).fail(function() {
                console.error("At least one task failed!");
            });  
        </pre>
    </div>
</body>

</html>